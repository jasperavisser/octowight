FROM oracle-java8

RUN useradd -ms /bin/bash app
USER app

ADD app /opt/app
WORKDIR /opt/app

ENV OCTOWIGHT_POSTGRES_HOSTNAME postgres-data-repository
ENV OCTOWIGHT_POSTGRES_PORT 5432
ENV OCTOWIGHT_POSTGRES_USERNAME postgres
ENV OCTOWIGHT_POSTGRES_DATABASE postgres
ENV OCTOWIGHT_ZOOKEEPER_HOSTNAME zookeeper
ENV OCTOWIGHT_ZOOKEEPER_PORT 2181
ENV OCTOWIGHT_REGISTRY_POSTGRES_HOSTNAME postgres-resource-registry
ENV OCTOWIGHT_REGISTRY_POSTGRES_PORT 5432
ENV OCTOWIGHT_REGISTRY_POSTGRES_USERNAME postgres
ENV OCTOWIGHT_REGISTRY_POSTGRES_DATABASE postgres

ENTRYPOINT ["java", "-cp", "/opt/app/*", "nl.haploid.octowight.sample.App"]

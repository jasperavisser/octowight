FROM oracle-java8

RUN useradd -ms /bin/bash app
USER app

ADD app /opt/app
WORKDIR /opt/app

ENV OCTOWIGHT_POSTGRES_HOSTNAME=postgres-data-repository \
	OCTOWIGHT_POSTGRES_PORT=5432 \
	OCTOWIGHT_POSTGRES_USERNAME=postgres \
	OCTOWIGHT_POSTGRES_DATABASE=postgres \
	OCTOWIGHT_ZOOKEEPER_HOSTNAME=zookeeper \
	OCTOWIGHT_ZOOKEEPER_PORT=2181 \
	OCTOWIGHT_REGISTRY_MONGO_HOSTNAME=mongo-resource-registry \
	OCTOWIGHT_REGISTRY_MONGO_PORT=27017 \
	OCTOWIGHT_REGISTRY_MONGO_DATABASE=resource-registry \
	OCTOWIGHT_REGISTRY_POSTGRES_HOSTNAME=postgres-resource-registry \
	OCTOWIGHT_REGISTRY_POSTGRES_PORT=5432 \
	OCTOWIGHT_REGISTRY_POSTGRES_USERNAME=postgres \
	OCTOWIGHT_REGISTRY_POSTGRES_DATABASE=postgres

ENTRYPOINT ["java", "-cp", "/opt/app/*", "nl.haploid.octowight.sample.App"]
